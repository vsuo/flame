apikey=__KEY__
apisecret=__SECRET__
auth=`echo ${apikey}:${apisecret} | base64`
org=__ORG__
env=__ENV__
host=$org-$env.apigee.net
appkey=__UGKEY__
appsecret=__UGSECRET__
apporg=__UGORG__
appapp=__UGAPP__
unamestr=`uname`

#identity-consent-app config.json
if [[ "$unamestr" == 'Linux' || "$unamestr" == *"NT"* ]]  ; then
	sed -i  "s/__APIKEY__/$apikey/g" ../identity-consent-app/config.json
	sed -i  "s/__AUTH__/$auth/g" ../identity-consent-app/config.json
	sed -i  "s/__HOST__/$host/g" ../identity-consent-app/config.json
else 
	sed -i  "" "s/__APIKEY__/$apikey/g" ../identity-consent-app/config.json
	sed -i  "" "s/__AUTH__/$auth/g" ../identity-consent-app/config.json
	sed -i  "" "s/__HOST__/$host/g" ../identity-consent-app/config.json
fi

#identity-consentmgmt-api config.json
if [[ "$unamestr" == 'Linux' || "$unamestr" == *"NT"* ]] ; then
	sed -i  "s/__APPKEY__/$appkey/g" ../identity-consentmgmt-api/config.json
	sed -i  "s/__APPSECRET__/$appsecret/g" ../identity-consentmgmt-api/config.json
	sed -i  "s/__APPORG__/$apporg/g" ../identity-consentmgmt-api/config.json
	sed -i  "s/__APPAPP__/$appapp/g" ../identity-consentmgmt-api/config.json
else
	sed -i  "" "s/__APPKEY__/$appkey/g" ../identity-consentmgmt-api/config.json
	sed -i  "" "s/__APPSECRET__/$appsecret/g" ../identity-consentmgmt-api/config.json
	sed -i  "" "s/__APPORG__/$apporg/g" ../identity-consentmgmt-api/config.json
	sed -i  "" "s/__APPAPP__/$appapp/g" ../identity-consentmgmt-api/config.json
fi

#identity-consentmgmt-api package.json
if [[ "$unamestr" == 'Linux' || "$unamestr" == *"NT"* ]] ; then
	sed -i  "s/__APPORG__/$apporg/g" ../identity-consentmgmt-api-node-module/consentmgmt/package.json
	sed -i  "s/__APPAPP__/$appapp/g" ../identity-consentmgmt-api-node-module/consentmgmt/package.json
	sed -i  "s/__APPKEY__/$appkey/g" ../identity-consentmgmt-api-node-module/consentmgmt/package.json
	sed -i  "s/__APPSECRET__/$appsecret/g" ../identity-consentmgmt-api-node-module/consentmgmt/package.json
else
	sed -i  "" "s/__APPORG__/$apporg/g" ../identity-consentmgmt-api-node-module/consentmgmt/package.json
	sed -i  "" "s/__APPAPP__/$appapp/g" ../identity-consentmgmt-api-node-module/consentmgmt/package.json
	sed -i  "" "s/__APPKEY__/$appkey/g" ../identity-consentmgmt-api-node-module/consentmgmt/package.json
	sed -i  "" "s/__APPSECRET__/$appsecret/g" ../identity-consentmgmt-api-node-module/consentmgmt/package.json
fi

#identity-oauthv2-api config.json
if [[ "$unamestr" == 'Linux' || "$unamestr" == *"NT"* ]] ; then
	sed -i  "s/__HOST__/$host/g" ../identity-oauthv2-api/config.json
	sed -i  "s/__AUTH__/$auth/g" ../identity-oauthv2-api/config.json
else
	sed -i  "" "s/__HOST__/$host/g" ../identity-oauthv2-api/config.json
	sed -i  "" "s/__AUTH__/$auth/g" ../identity-oauthv2-api/config.json
fi

#identity-usermgmt-api config.json
if [[ "$unamestr" == 'Linux' || "$unamestr" == *"NT"* ]] ; then
	sed -i  "s/__APPORG__/$apporg/g" ../identity-usermgmt-api/config.json
	sed -i  "s/__APPAPP__/$appapp/g" ../identity-usermgmt-api/config.json
	sed -i  "s/__APPKEY__/$appkey/g" ../identity-usermgmt-api/config.json
	sed -i  "s/__APPSECRET__/$appsecret/g" ../identity-usermgmt-api/config.json
else
	sed -i  "" "s/__APPORG__/$apporg/g" ../identity-usermgmt-api/config.json
	sed -i  "" "s/__APPAPP__/$appapp/g" ../identity-usermgmt-api/config.json
	sed -i  "" "s/__APPKEY__/$appkey/g" ../identity-usermgmt-api/config.json
	sed -i  "" "s/__APPSECRET__/$appsecret/g" ../identity-usermgmt-api/config.json
fi

#identity-usermgmt-api package.json
if [[ "$unamestr" == 'Linux' || "$unamestr" == *"NT"* ]] ; then
	sed -i  "s/__APPORG__/$apporg/g" ../identity-usermgmt-node-module/usermgmt/package.json
	sed -i  "s/__APPAPP__/$appapp/g" ../identity-usermgmt-node-module/usermgmt/package.json
	sed -i  "s/__APPKEY__/$appkey/g" ../identity-usermgmt-node-module/usermgmt/package.json
	sed -i  "s/__APPSECRET__/$appsecret/g" ../identity-usermgmt-node-module/usermgmt/package.json
else
	sed -i  "" "s/__APPORG__/$apporg/g" ../identity-usermgmt-node-module/usermgmt/package.json
	sed -i  "" "s/__APPAPP__/$appapp/g" ../identity-usermgmt-node-module/usermgmt/package.json
	sed -i  "" "s/__APPKEY__/$appkey/g" ../identity-usermgmt-node-module/usermgmt/package.json
	sed -i  "" "s/__APPSECRET__/$appsecret/g" ../identity-usermgmt-node-module/usermgmt/package.json
fi

#identity-demo-api config.json
if [[ "$unamestr" == 'Linux' || "$unamestr" == *"NT"* ]] ; then
	sed -i  "s/__HOST__/$host/g" ../identity-demo-app/config.json
	sed -i  "s/__APIKEY__/$apikey/g" ../identity-demo-app/config.json
	sed -i  "s/__APISECRET__/$apisecret/g" ../identity-demo-app/config.json
else
	sed -i  "" "s/__HOST__/$host/g" ../identity-demo-app/config.json
	sed -i  "" "s/__APIKEY__/$apikey/g" ../identity-demo-app/config.json
	sed -i  "" "s/__APISECRET__/$apisecret/g" ../identity-demo-app/config.json
fi
